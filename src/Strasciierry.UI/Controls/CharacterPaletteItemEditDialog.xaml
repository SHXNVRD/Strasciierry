<?xml version="1.0" encoding="utf-8"?>
<ContentDialog x:Class="Strasciierry.UI.Controls.CharacterPaletteItemEditDialog"
               xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:local="using:Strasciierry.UI.Controls"
               xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
               xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
               xmlns:tc="using:CommunityToolkit.WinUI.Controls"
               xmlns:converters="using:Strasciierry.UI.Converters"
               mc:Ignorable="d"
               PrimaryButtonClick="OnPrimaryButtonClick"
               DefaultButton="Primary"
               x:Uid="CharacterPaletteItemEditDialog">

    <ContentDialog.Resources>
        <converters:ColorToContrastSolidColorBrushConverter x:Key="ColorToContrastConverter" />
        <converters:FontStyleToTextDecorationsConverter x:Key="FontStyleToTextDecorationsConverter" />
        <converters:FontStyleToFontWeightConverter x:Key="FontStyleToFontWeightConverter" />
        <converters:SystemDrawingFontStyleToWindowsUiFontStyleConverter x:Key="FontStyleToFontStyleConverter" />
        <converters:SystemDrawingColorToBrushConverter x:Key="SystemDrawingColorToBrushConverter" />
        <converters:SystemDrawingColorToHexConverter x:Key="ColorToHexConverter" />
        <converters:FontStyleToVisibilityConverter x:Key="FontStyleToVisibilityConverter" />
        <converters:FontStyleToBooleanConvetrer x:Key="FontStyleToBooleanConvetrer" />
        <converters:SystemDrawingColorToWindowsUiColorConverter x:Key="ColorToColorConverter" />
    </ContentDialog.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Border Background="{x:Bind EditingItem.Background, Converter={StaticResource SystemDrawingColorToBrushConverter}, Mode=OneWay}"
                CornerRadius="5"
                Grid.Column="0"
                Margin="{StaticResource SmallRightMargin}"
                Padding="{StaticResource SmallLeftRightMargin}">
            <TextBlock Text="{x:Bind EditingItem.Character}"
                       FontFamily="{x:Bind EditingItem.FontFamily.Name, Mode=OneWay}"
                       TextDecorations="{x:Bind EditingItem.FontStyle, Converter={StaticResource FontStyleToTextDecorationsConverter}, Mode=OneWay}"
                       FontStyle="{x:Bind EditingItem.FontStyle, Converter={StaticResource FontStyleToFontStyleConverter}, Mode=OneWay}"
                       FontWeight="{x:Bind EditingItem.FontStyle, Converter={StaticResource FontStyleToFontWeightConverter}, Mode=OneWay}"
                       Foreground="{x:Bind EditingItem.Foreground, Converter={StaticResource SystemDrawingColorToBrushConverter}, Mode=OneWay}"
                       FontSize="230"
                       Padding="0"
                       TextAlignment="Center"/>
        </Border>

        <Grid Grid.Column="1">
            <StackPanel Spacing="10">

                <TextBlock x:Uid="CharacterPaletteItemEditDialogFontCategory"
                           Style="{StaticResource SubtitleTextBlockStyle}" />

                <ComboBox ItemsSource="{x:Bind Fonts, Mode=OneWay}"
                          DisplayMemberPath="FontFamily.Name"
                          SelectedItem="{x:Bind EditingItem.FontFamily, Mode=TwoWay}"
                          IsEditable="False"
                          HorizontalAlignment="Stretch"
                          SelectedValue="{x:Bind EditingItem.FontFamily, Mode=TwoWay}"
                          SelectedValuePath="FontFamily"/>

                <Grid HorizontalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>

                    <Border Margin="{StaticResource XXSmallRightMargin}"
                            Grid.Column="0"
                            Style="{StaticResource CardBorderStyle}">
                        <StackPanel>
                            <TextBlock x:Uid="CharacterPaletteItemEditDialogCharacterForegorund"
                                       TextWrapping="WrapWholeWords"
                                       TextAlignment="Center"
                                       Margin="{StaticResource XXSmallBottomtMargin}" />
                            <tc:ColorPickerButton HorizontalAlignment="Stretch"
                                                  Style="{StaticResource TransperantColorPickerButtonStyle}"
                                                  SelectedColor="{x:Bind EditingItem.Foreground, Converter={StaticResource ColorToColorConverter}, Mode=TwoWay}"/>
                        </StackPanel>
                    </Border>

                    <Border Margin="{StaticResource XXSmallLeftMargin}"
                            Grid.Column="1"
                            Style="{StaticResource CardBorderStyle}">
                        <StackPanel>
                            <TextBlock x:Uid="CharacterPaletteItemEditDialogCharacterBackground"
                                       TextWrapping="WrapWholeWords"
                                       TextAlignment="Center"
                                       Margin="{StaticResource XXSmallBottomtMargin}"/>
                            <tc:ColorPickerButton HorizontalAlignment="Stretch"
                                                  Style="{StaticResource TransperantColorPickerButtonStyle}"
                                                  SelectedColor="{x:Bind EditingItem.Background, Converter={StaticResource ColorToColorConverter}, Mode=TwoWay}"/>
                        </StackPanel>
                    </Border>
                </Grid>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                        <ColumnDefinition />
                    </Grid.ColumnDefinitions>
                    
                    <ToggleButton Click="OnBoldToggleClick"
                                  Background="Transparent"
                                  BorderBrush="Transparent"
                                  Margin="5 0 5 0"
                                  Grid.Column="0"
                                  IsChecked="{x:Bind EditingItem.FontStyle, Converter={StaticResource FontStyleToBooleanConvetrer}, ConverterParameter=Bold, Mode=OneWay}">
                        <FontIcon Glyph="&#xE8DD;" />
                    </ToggleButton>

                    <ToggleButton Click="OnItalicToggleClick"
                                  Background="Transparent"
                                  BorderBrush="Transparent"
                                  Margin="0 0 5 0"
                                  Grid.Column="1"
                                  IsChecked="{x:Bind EditingItem.FontStyle, Converter={StaticResource FontStyleToBooleanConvetrer}, ConverterParameter=Italic, Mode=OneWay}">
                        <FontIcon Glyph="&#xE8DB;" />
                    </ToggleButton>

                    <ToggleButton Click="OnUnderlineToggleClick"
                                  Background="Transparent"
                                  BorderBrush="Transparent"
                                  Margin="0 0 5 0"
                                  Grid.Column="2"
                                  IsChecked="{x:Bind EditingItem.FontStyle,  Converter={StaticResource FontStyleToBooleanConvetrer}, ConverterParameter=Underline, Mode=OneWay}">
                        <FontIcon Glyph="&#xE8DC;" />
                    </ToggleButton>

                    <ToggleButton Click="OnStrikeoutToggleClick"
                                  Background="Transparent"
                                  BorderBrush="Transparent"
                                  Margin="0 0 5 0"
                                  Grid.Column="3"
                                  IsChecked="{x:Bind EditingItem.FontStyle,  Converter={StaticResource FontStyleToBooleanConvetrer}, ConverterParameter=Strikeout, Mode=OneWay}">
                        <FontIcon Glyph="&#xEDE0;" />
                    </ToggleButton>
                </Grid>
            </StackPanel>
        </Grid>
    </Grid>
</ContentDialog>
